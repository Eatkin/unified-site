{% extends 'base.html' %}

{% block content %}
<h1>Edward Atkin</h1>
<div id="feed">
  {% for item in feed %}
  <div class="feed-item">
    <h2>
      <a href="{{ item.url }}" target="_blank">
        {{ item.title }}
      </a>
    </h2>
    <h3>
      {{ item.collection }}
    </h3>
    <p><strong>Author:</strong>
      {{ item.author }}
    </p>
    <p><strong>Date:</strong>
      {{ item.date }}
    </p>
    {% if item.thumbnail %}
    <a href="{{ item.url }}" target="_blank">
      <img src="{{ item.thumbnail }}" alt="{{ item.title }}">
    </a>
    {% endif %}
    <p><strong>Description:</strong>
      {{ item.description }}
    </p>
    <p><strong>Tags:</strong>
      {{ item.tags }}
    </p>
    <div>
      {{ item.html | safe }}
    </div>
  </div>
  {% endfor %}
</div>

<div id="pagination">
  {% set args = request.args.to_dict() %}
  {% if pagination.has_prev %}
  {% set args = args.update({'page': pagination.prev_num}) or args %}
  <a href="{{ url_for('index', **args) }}">Previous</a>
  {% endif %}
  {% for page in range(1, pagination.page_count + 1) %}
  {% if page != pagination.page %}
  {% set args = args.update({'page': page}) or args %}
  <a href="{{ url_for('index', **args) }}">
    {{ page }}</a>
  {% else %}
  {{ page }}
  {% endif %}
  {% endfor %}
  {% if pagination.has_next %}
  {% set args = args.update({'page': pagination.next_num}) or args %}
  <a href="{{ url_for('index', **args) }}">Next</a>
  {% endif %}
</div>
{% endblock %}
